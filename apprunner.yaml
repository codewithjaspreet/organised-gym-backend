version: 1.0

runtime: docker

build:
  dockerfile: Dockerfile
  context: .

run:
  command: uvicorn main:app --host 0.0.0.0 --port 8080
  network:
    port: 8080

  env:
    APP_NAME: "Organised Gym"
    ALGORITHM: "HS256"
    ACCESS_TOKEN_EXPIRE_MINUTES: "43200"
    REFRESH_TOKEN_EXPIRE_DAYS: "7"

    AWS_REGION: "ap-south-1"
    DB_HOST: "og-gym-db.cz40qy680dya.ap-south-1.rds.amazonaws.com"
    DB_PORT: "5432"
    DB_NAME: "og_gym"
    DB_USER: "apprunner_user"

  secrets:
    SECRET_KEY: "arn:aws:secretsmanager:ap-south-1:324512687832:secret:og-db-secrets-NIaDV3:SECRET_KEY::"
    CLOUDINARY_CLOUD_NAME: "arn:aws:secretsmanager:ap-south-1:324512687832:secret:og-db-secrets-NIaDV3:CLOUDINARY_CLOUD_NAME::"
    CLOUDINARY_CLOUD_API_KEY: "arn:aws:secretsmanager:ap-south-1:324512687832:secret:og-db-secrets-NIaDV3:CLOUDINARY_CLOUD_API_KEY::"
    CLOUDINARY_CLOUD_API_SECRET: "arn:aws:secretsmanager:ap-south-1:324512687832:secret:og-db-secrets-NIaDV3:CLOUDINARY_CLOUD_API_SECRET::"
    CLOUDINARY_URL: "arn:aws:secretsmanager:ap-south-1:324512687832:secret:og-db-secrets-NIaDV3:CLOUDINARY_URL::"
    FIREBASE_BASE_64: "arn:aws:secretsmanager:ap-south-1:324512687832:secret:og-db-secrets-NIaDV3:FIREBASE_BASE_64::"
